<html>

<body>
  <button onclick="startRecording(this);">record</button>
  <button onclick="stopRecording(this);">stop</button>

  <h2>Log</h2>
  <pre id="log"></pre>
</body>

</html>

<script>

  function htmlLog(e, data) {
    log.innerHTML += "\n" + e + " " + (data || '');
  }

  async function startRecording(button) {
    console.log('Recording...')
    const res = await fetch(`http://127.0.0.1:3000/api/broadcast/start`)
    if (res.status === 200) {
      console.log(`好耶，開始廣播吧～`);
      htmlLog(`好耶，開始廣播吧～`)
    } else {
      htmlLog(`！！！！！\n居然被搶先了，只好再等等了...ＱＱ`)
      console.log(`！！！！！\n居然被搶先了，只好再等等了...ＱＱ`);
    }
  }

  function stopRecording(button) { 
    console.log('stop...');
    fetch(`http://127.0.0.1:3000/api/broadcast/stop`)
      .then(res => console.log(res.body))
    htmlLog(`廣播結束`)
    
  }

</script>